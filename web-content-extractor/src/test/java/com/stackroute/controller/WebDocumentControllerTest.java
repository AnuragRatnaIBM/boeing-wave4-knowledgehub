package com.stackroute.controller;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.stackroute.domain.WebDocument;
import com.stackroute.service.WebDocumentService;
import org.json.simple.JSONObject;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.MockitoAnnotations;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.boot.test.mock.mockito.MockBean;
import org.springframework.http.MediaType;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
import org.springframework.test.web.servlet.result.MockMvcResultHandlers;
import org.springframework.test.web.servlet.result.MockMvcResultMatchers;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;

import java.util.ArrayList;
import java.util.List;
import static org.mockito.Mockito.*;

@RunWith(SpringRunner.class)
@WebMvcTest
public class WebDocumentControllerTest {

    private WebDocument webDocument;
    @Autowired
    private MockMvc mockMvc;

    @MockBean
    WebDocumentService webDocumentService;

    @InjectMocks
    WebDocumentController webDocumentController;

    @Before
    public void setUp() throws Exception{
        MockitoAnnotations.initMocks(this);
        mockMvc = MockMvcBuilders.standaloneSetup(webDocumentController).build();
        webDocument= new WebDocument();
        webDocument.setLink("https://www.tutorialspoint.com/spring/spring_hello_world_example.htm");
        webDocument.setId("1");
        webDocument.setConceptName("concept");
        webDocument.setDomain("Spring");
//        webDocument.setWebContent("<!doctype html>\n<!--[if IE 8]><html class=\"ie ie8\"> <![endif]-->\n<!--[if IE 9]><html class=\"ie ie9\"> <![endif]-->\n<!--[if gt IE 9]><!-->\n<html>\n <!--<![endif]-->\n <head> \n  <!-- Basic --> \n  <meta charset=\"utf-8\"> \n  <title>Spring Hello World Example</title> \n  <meta name=\"description\" content=\"Spring Hello World Example - Learn Java Spring Framework version 4.1.6 in simple and easy steps starting from basic to advanced concepts with examples including Overview, Architecture, environment setup, Hello World Example, inversion of control (IoC), dependency injection, bean definition, scopes, bean life cycle, Post Processors, definition inheritance, dependency injection,  inner beans, injecting collection, autowiring, Annotation, Java based configuration, event handling, custom events, different modules, aspect oriented programming (AOP), database access (JDBC), Transaction Management, Web MVC framework, logging with Log4j, Web Flow, Exception handling, EJB integration and Sending email, Spring Interview Questions, Answers, Quiz and Online Mock Test.\"> \n  <meta name=\"keywords\" content=\"Free, Spring, Tutorials, beginners, Framework, Web Flow,  Reference, Manual, Guide, transaction, Management, Overview, Architecture, environment setup, Hello World Example, inversion of control (IoC), dependency injection, bean definition, scopes, bean life cycle, Post Processors, definition inheritance, dependency injection,  inner beans, injecting collection, autowiring, Annotation, Java based configuration, event handling, custom events, different modules, aspect oriented programming (AOP), database access (JDBC), Web MVC framework, logging with Log4j, Exception handling, EJB integration and Sending email, Spring Interview Questions, Answers, Quiz and Online Mock Test.\"> \n  <base href=\"https://www.tutorialspoint.com/\"> \n  <link rel=\"shortcut icon\" href=\"/favicon.ico\" type=\"image/x-icon\"> \n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,user-scalable=yes\"> \n  <meta property=\"og:locale\" content=\"en_US\"> \n  <meta property=\"og:type\" content=\"website\"> \n  <meta property=\"fb:app_id\" content=\"471319149685276\"> \n  <meta property=\"og:site_name\" content=\"www.tutorialspoint.com\"> \n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\"> \n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\"> \n  <meta name=\"author\" content=\"tutorialspoint.com\"> \n  <script type=\"text/javascript\" src=\"https://www.tutorialspoint.com/theme/js/script-min-v4.js?v=2\"></script> \n  <link rel=\"stylesheet\" href=\"https://www.tutorialspoint.com/theme/css/style-min.css?v=3.1\"> \n  <script>\r\nfunction openNav() {\t\r\n  document.getElementById(\"mySidenav\").style.width = \"250px\";\r\n  document.getElementById(\"right_obs\").style.display = \"block\";\r\n}\r\nfunction closeNav() {\r\n  document.getElementById(\"mySidenav\").style.width = \"0\";\r\n  document.getElementById(\"right_obs\").style.display = \"none\";\r\n}\r\nfunction close_obs_sidenav(){\r\n  document.getElementById(\"mySidenav\").style.width = \"0\";\r\n  document.getElementById(\"right_obs\").style.display = \"none\";\r\n}\r\n</script> \n  <!-- Head Libs --> \n  <!--[if IE 8]>\r\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/theme/css/ie8.css\">\r\n<![endif]--> \n  <style>\r\n#privacy-banner {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    max-width: 100%;\r\n    padding: 1rem .5rem;\r\n    background: #fff;\r\n    z-index: 1030;\r\n    color: #000;\r\n    font-size: 14px;\r\n    margin: 0;\r\n    display: none;\r\n    border-top: 2px solid rgb(130, 130, 130);\r\n  }\r\n  #privacy-banner p {\r\n    margin: 0;\r\n    color: #000;\r\n    text-align: center;\r\n  }\r\n  #privacy-banner a {\r\n    text-decoration: none;\r\n    margin: 20px auto 0 auto;\r\n    display: block;\r\n    max-width: 150px;\r\n  }\r\n  #privacy-banner a:hover {\r\n    text-decoration: underline;\r\n  }\r\n  #banner-learn {\r\n    color: #000;\r\n  }\r\n  #banner-accept {\r\n    padding: 7px 15px;\r\n    color: #fff;\r\n    border-radius: 5px;\r\n    background:#737373 !important;\r\n  }\r\n  @media (min-width: 768px) {\r\n    #privacy-banner {\r\n      padding: 1.5rem .5rem;\r\n    }\r\n    #privacy-banner a {\r\n      display: inline-block;\r\n      margin: 0 10px;\r\n    }\r\n}\r\nselect{ border:0 !important; outline: 1px inset black !important; outline-offset: -1px !important; }\r\n.btnsbmt{ background: #387b2c !important;}\r\nul.nav-list.primary>li a.videolink{    background: none; margin: 0px; padding: 0px; border: 1px solid #d6d6d6;}\r\ndiv.feature-box div.feature-box-icon, .col-md-3 .course-box, li.heading, div.footer-copyright { background: #387b2c url(/images/pattern.png) repeat center center !important;}\r\n.sub-main-menu .sub-menuu div:hover, .sub-main-menu .viewall, header nav ul.nav-main li a:hover, button.btn-responsive-nav, header div.search button.btn-default { background: #387b2c !important;}\r\n.submenu-item{ border-bottom: 2px solid #387b2c !important; border-top: 2px solid #387b2c !important }\r\n.ace_scroller{overflow: auto!important;}\r\na.demo{font-family: \"Open Sans\",Arial,sans-serif; background:#387b2c; color:#fff; font-size:13px; padding:3px 10px; border:1px solid #d6d6d6; position:absolute; right:5px; margin:-6px 17px 0px 0px;}\r\na.demo:hover{opacity:.8}\r\n</style> \n  <script>\r\n$(document).ready(function() {\r\n  $('input[name=\"q\"]').keydown(function(event){\r\n    if(event.keyCode == 13) {\r\n      event.preventDefault();\r\n      return false;\r\n    }\r\n  });\r\n});\r\n</script> \n </head> \n <body onload=\"prettyPrint()\"> \n  <div class=\"wrapLoader\"> \n   <div class=\"imgLoader\"> \n    <img src=\"/images/loading-cg.gif\" alt=\"\" width=\"70\" height=\"70\"> \n   </div> \n  </div> \n  <div id=\"right_obs\" class=\"display-none\" onclick=\"close_obs_sidenav()\"></div> \n  <header> \n   <div class=\"container\"> \n    <h1 class=\"logo\"> <a href=\"index.htm\" title=\"tutorialspoint\"> <img alt=\"tutorialspoint\" src=\"/spring/images/logo.png\"> </a> </h1> \n    <ul class=\"tp-inline-block pull-right\" id=\"tp-head-icons\"> \n     <li> \n      <div class=\"tp-second-nav tp-display-none tp-pointer\" onclick=\"openNav()\"> \n       <i class=\"fa fa-th-large fa-lg\"></i> \n      </div> </li> \n    </ul> \n    <button class=\"btn btn-responsive-nav btn-inverse\" data-toggle=\"collapse\" data-target=\".nav-main-collapse\" id=\"pull\" style=\"top: 24px!important\"> <i class=\"icon icon-bars\"></i> </button> \n    <nav> \n     <ul class=\"nav nav-pills nav-top\"> \n      <li><a href=\"/about/about_careers.htm\" style=\"background: #fffb09; font-weight: bold;\"><i class=\"icon icon-suitcase\"></i> Jobs</a></li> \n      <li> <a target=\"_blank\" href=\"/programming_examples/\"><i class=\"fa fa-cubes\"></i> &nbsp;Examples</a> </li> \n      <li> <a href=\"https://www.tutorialspoint.com/whiteboard.htm\"><img src=\"theme/css/icons/image-editor.png\" alt=\"Whiteboard\" title=\"Whiteboard\"> &nbsp;Whiteboard</a> </li> \n      <li> <a href=\"https://www.tutorialspoint.com/netmeeting.php\"><i class=\"fa-camera\"></i> &nbsp;Net Meeting</a> </li> \n      <li> <a href=\"/online_dev_tools.htm\"> <i class=\"dev-tools-menu\" style=\"opacity:.5\"></i> Tools </a> </li> \n      <li> <a href=\"/articles/index.php\"><i class=\"icon icon-file-text-o\"></i> &nbsp;Articles</a> </li> \n      <li class=\"top-icons\"> \n       <ul class=\"social-icons\"> \n        <li class=\"facebook\"><a href=\"https://www.facebook.com/tutorialspointindia\" target=\"_blank\" rel=\"nofollow\" data-placement=\"bottom\" title=\"tutorialspoint @ Facebook\">Facebook</a></li> \n        <li class=\"googleplus\"><a href=\"https://plus.google.com/u/0/116678774017490391259/posts\" target=\"_blank\" rel=\"nofollow\" data-placement=\"bottom\" title=\"tutorialspoint @ Google+\">Google+</a></li> \n        <li class=\"twitter\"><a href=\"https://www.twitter.com/tutorialspoint\" target=\"_blank\" rel=\"nofollow\" data-placement=\"bottom\" title=\"tutorialspoint @ Twitter\">Twitter</a></li> \n        <li class=\"linkedin\"><a href=\"https://www.linkedin.com/company/tutorialspoint\" target=\"_blank\" rel=\"nofollow\" data-placement=\"bottom\" title=\"tutorialspoint @ Linkedin\">Linkedin</a></li> \n        <li class=\"youtube\"><a href=\"https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg\" target=\"_blank\" rel=\"nofollow\" data-placement=\"bottom\" title=\"tutorialspoint YouTube\">YouTube</a></li> \n       </ul> </li> \n     </ul> \n    </nav> \n   </div> \n   <div class=\"sidenav\" id=\"mySidenav\"> \n    <div class=\"navbar nav-main\"> \n     <div class=\"container\"> \n      <nav class=\"nav-main mega-menu\"> \n       <ul class=\"nav nav-pills nav-main\" id=\"mainMenu\"> \n        <li class=\"dropdown no-sub-menu\"> <a class=\"dropdown\" href=\"index.htm\"><i class=\"icon icon-home\"></i> Home</a> </li> \n        <li class=\"dropdown no-sub-menu\"><a class=\"dropdown\" href=\"/questions/index.php\"><i class=\"fa fa-send\"></i> Q/A </a> </li> \n        <li class=\"dropdown\"><a class=\"dropdown\" href=\"tutorialslibrary.htm\"><span class=\"tut-lib\"> Library </span></a></li> \n        <li class=\"dropdown no-sub-menu\"><a class=\"dropdown\" href=\"videotutorials/index.htm\"><i class=\"fa-toggle-right\"></i> Videos </a></li> \n        <li class=\"dropdown no-sub-menu\"><a class=\"dropdown\" href=\"tutor_connect/index.php\"><i class=\"fa-user\"> </i> Tutors</a></li> \n        <li class=\"dropdown no-sub-menu\"><a class=\"dropdown\" href=\"codingground.htm\"><i class=\"fa-code\"></i> Coding Ground </a> </li> \n        <li class=\"dropdown no-sub-menu\"><a class=\"dropdown\" href=\"https://store.tutorialspoint.com/\"><i class=\"fa-usd\"></i> Store </a> </li> \n        <li class=\"dropdown no-sub-menu\"> \n         <div class=\"searchform-popup\"> \n          <input class=\"header-search-box\" type=\"text\" id=\"search-string\" name=\"q\" placeholder=\"Search your favorite tutorials...\" onfocus=\"if (this.value == 'Search your favorite tutorials...') {this.value = '';}\" onblur=\"if (this.value == '') {this.value = 'Search your favorite tutorials...';}\" autocomplete=\"off\"> \n          <div class=\"magnifying-glass\">\n           <i class=\"icon-search\"></i> Search \n          </div> \n         </div> </li> \n       </ul> \n      </nav> \n     </div> \n    </div> \n   </div>  \n  </header> \n  <div style=\"clear:both;\"></div> \n  <div role=\"main\" class=\"main\"> \n   <div class=\"container\"> \n    <div class=\"row\"> \n     <div class=\"col-md-2\"> \n      <aside class=\"sidebar\"> \n       <style>\n.ts {\n   text-align: center !important;\n   vertical-align: middle !important;\n}\n</style> \n       <div class=\"mini-logo\"> \n        <img src=\"/spring/images/spring-mini-logo.jpg\" alt=\"Spring Tutorial\"> \n       </div> \n       <ul class=\"nav nav-list primary left-menu\"> \n        <li class=\"heading\">Spring Core Basics</li> \n        <li><a href=\"/spring/index.htm\">Spring - Home</a></li> \n        <li><a href=\"/spring/spring_overview.htm\">Spring - Overview</a></li> \n        <li><a href=\"/spring/spring_architecture.htm\">Spring - Architecture</a></li> \n        <li><a href=\"/spring/spring_environment_setup.htm\">Spring - Environment Setup</a></li> \n        <li><a href=\"/spring/spring_hello_world_example.htm\">Spring - Hello World Example</a></li> \n        <li><a href=\"/spring/spring_ioc_containers.htm\">Spring - IoC Containers</a></li> \n        <li><a href=\"/spring/spring_bean_definition.htm\">Spring - Bean Definition</a></li> \n        <li><a href=\"/spring/spring_bean_scopes.htm\">Spring - Bean Scopes</a></li> \n        <li><a href=\"/spring/spring_bean_life_cycle.htm\">Spring - Bean Life Cycle</a></li> \n        <li><a href=\"/spring/spring_bean_post_processors.htm\">Spring - Bean Post Processors</a></li> \n        <li><a href=\"/spring/spring_bean_definition_inheritance.htm\">Spring - Bean Definition Inheritance</a></li> \n        <li><a href=\"/spring/spring_dependency_injection.htm\">Spring - Dependency Injection</a></li> \n        <li><a href=\"/spring/spring_injecting_inner_beans.htm\">Spring - Injecting Inner Beans</a></li> \n        <li><a href=\"/spring/spring_injecting_collection.htm\">Spring - Injecting Collection</a></li> \n        <li><a href=\"/spring/spring_beans_autowiring.htm\">Spring - Beans Auto-Wiring</a></li> \n        <li><a href=\"/spring/spring_annotation_based_configuration.htm\">Annotation Based Configuration</a></li> \n        <li><a href=\"/spring/spring_java_based_configuration.htm\">Spring - Java Based Configuration</a></li> \n        <li><a href=\"/spring/event_handling_in_spring.htm\">Spring - Event Handling in Spring</a></li> \n        <li><a href=\"/spring/custom_events_in_spring.htm\">Spring - Custom Events in Spring</a></li> \n        <li><a href=\"/spring/aop_with_spring.htm\">Spring - AOP with Spring Framework</a></li> \n        <li><a href=\"/spring/spring_jdbc_framework.htm\">Spring - JDBC Framework</a></li> \n        <li><a href=\"/spring/spring_transaction_management.htm\">Spring - Transaction Management</a></li> \n        <li><a href=\"/spring/spring_web_mvc_framework.htm\">Spring - Web MVC Framework</a></li> \n        <li><a href=\"/spring/logging_with_log4j.htm\">Spring - Logging with Log4J</a></li> \n       </ul> \n       <ul class=\"nav nav-list primary left-menu\"> \n        <li class=\"heading\">Spring Questions and Answers</li> \n        <li><a href=\"/spring/spring_questions_answers.htm\">Spring - Questions and Answers</a></li> \n       </ul> \n       <ul class=\"nav nav-list primary left-menu\"> \n        <li class=\"heading\">Spring Useful Resources</li> \n        <li><a href=\"/spring/spring_quick_guide.htm\">Spring - Quick Guide</a></li> \n        <li><a href=\"/spring/spring_useful_resources.htm\">Spring - Useful Resources</a></li> \n        <li><a href=\"/spring/spring_discussion.htm\">Spring - Discussion</a></li> \n       </ul> \n       <ul class=\"nav nav-list primary push-bottom left-menu special\"> \n        <li class=\"sreading\">Selected Reading</li> \n        <li><a target=\"_top\" href=\"/upsc_ias_exams.htm\">UPSC IAS Exams Notes</a></li> \n        <li><a target=\"_top\" href=\"/developers_best_practices/index.htm\">Developer's Best Practices</a></li> \n        <li><a target=\"_top\" href=\"/questions_and_answers.htm\">Questions and Answers</a></li> \n        <li><a target=\"_top\" href=\"/effective_resume_writing.htm\">Effective Resume Writing</a></li> \n        <li><a target=\"_top\" href=\"/hr_interview_questions/index.htm\">HR Interview Questions</a></li> \n        <li><a target=\"_top\" href=\"/computer_glossary.htm\">Computer Glossary</a></li> \n        <li><a target=\"_top\" href=\"/computer_whoiswho.htm\">Who is Who</a></li> \n       </ul> \n      </aside> \n     </div> \n     <!-- PRINTING STARTS HERE --> \n     <div class=\"row\"> \n      <div class=\"content\"> \n       <div class=\"col-md-7 middle-col\"> \n        <h1>Spring - Hello World Example</h1> \n        <hr> \n        <div style=\"padding-bottom:5px;padding-left:10px;text-align: center;\">\n         Advertisements\n        </div> \n        <div style=\"text-align: center;\"> \n         <script type=\"text/javascript\"><!--\ngoogle_ad_client = \"pub-7133395778201029\";\ngoogle_ad_width = 468;\ngoogle_ad_height = 60;\ngoogle_ad_format = \"468x60_as\";\ngoogle_ad_type = \"image\";\ngoogle_ad_channel = \"\";\n//--></script> \n         <script type=\"text/javascript\" src=\"https://pagead2.googlesyndication.com/pagead/show_ads.js\"> \n</script> \n        </div> \n        <hr> \n        <div class=\"pre-btn\"> \n         <a href=\"/spring/spring_environment_setup.htm\"><i class=\"icon icon-arrow-circle-o-left big-font\"></i> Previous Page</a> \n        </div> \n        <div class=\"nxt-btn\"> \n         <a href=\"/spring/spring_ioc_containers.htm\">Next Page <i class=\"icon icon-arrow-circle-o-right big-font\"></i>&nbsp;</a> \n        </div> \n        <div class=\"clearer\"></div> \n        <hr> \n        <p>Let us start actual programming with Spring Framework. Before you start writing your first example using Spring framework, you have to make sure that you have set up your Spring environment properly as explained in <a href=\"/spring/spring_environment_setup.htm\">Spring - Environment Setup</a> Chapter. We also assume that you have a bit of working knowledge on Eclipse IDE.</p> \n        <p>Now let us proceed to write a simple Spring Application, which will print \"Hello World!\" or any other message based on the configuration done in Spring Beans Configuration file.</p> \n        <h2>Step 1 - Create Java Project</h2> \n        <p>The first step is to create a simple Java Project using Eclipse IDE. Follow the option <b>File → New → Project</b> and finally select <b>Java Project</b> wizard from the wizard list. Now name your project as <b>HelloSpring</b> using the wizard window as follows −</p> \n        <img src=\"/spring/images/hello_spring_wizard.jpg\" alt=\"Hello Spring Wizard\"> \n        <p>Once your project is created successfully, you will have the following content in your <b>Project Explorer</b> −</p> \n        <img src=\"/spring/images/hello_spring_dir.jpg\" alt=\"Hello Spring Directories\"> \n        <h2>Step 2 - Add Required Libraries</h2> \n        <p>As a second step let us add Spring Framework and common logging API libraries in our project. To do this, right-click on your project name <b>HelloSpring</b> and then follow the following option available in the context menu − <b>Build Path → Configure Build Path</b> to display the Java Build Path window as follows −</p> \n        <img src=\"/spring/images/java_build_path.jpg\" alt=\"Java Build Path\"> \n        <p>Now use <b>Add External JARs</b> button available under the <b>Libraries</b> tab to add the following core JARs from Spring Framework and Common Logging installation directories −</p> \n        <ul class=\"list\"> \n         <li><p>commons-logging-1.1.1</p></li> \n         <li><p>spring-aop-4.1.6.RELEASE</p></li> \n         <li><p>spring-aspects-4.1.6.RELEASE</p></li> \n         <li><p>spring-beans-4.1.6.RELEASE</p></li> \n         <li><p>spring-context-4.1.6.RELEASE</p></li> \n         <li><p>spring-context-support-4.1.6.RELEASE</p></li> \n         <li><p>spring-core-4.1.6.RELEASE</p></li> \n         <li><p>spring-expression-4.1.6.RELEASE</p></li> \n         <li><p>spring-instrument-4.1.6.RELEASE</p></li> \n         <li><p>spring-instrument-tomcat-4.1.6.RELEASE</p></li> \n         <li><p>spring-jdbc-4.1.6.RELEASE</p></li> \n         <li><p>spring-jms-4.1.6.RELEASE</p></li> \n         <li><p>spring-messaging-4.1.6.RELEASE</p></li> \n         <li><p>spring-orm-4.1.6.RELEASE</p></li> \n         <li><p>spring-oxm-4.1.6.RELEASE</p></li> \n         <li><p>spring-test-4.1.6.RELEASE</p></li> \n         <li><p>spring-tx-4.1.6.RELEASE</p></li> \n         <li><p>spring-web-4.1.6.RELEASE</p></li> \n         <li><p>spring-webmvc-4.1.6.RELEASE</p></li> \n         <li><p>spring-webmvc-portlet-4.1.6.RELEASE</p></li> \n         <li><p>spring-websocket-4.1.6.RELEASE</p></li> \n        </ul> \n        <h2>Step 3 - Create Source Files</h2> \n        <p>Now let us create actual source files under the <b>HelloSpring</b> project. First we need to create a package called <b>com.tutorialspoint</b>. To do this, right click on <b>src</b> in package explorer section and follow the option − <b>New → Package</b>.</p> \n        <p>Next we will create <b>HelloWorld.java</b> and <b>MainApp.java</b> files under the com.tutorialspoint package.</p> \n        <img src=\"/spring/images/spring_source_files.jpg\" alt=\"Spring Source Files\"> \n        <p>Here is the content of <b>HelloWorld.java</b> file −</p> \n        <pre class=\"prettyprint notranslate\">\npackage com.tutorialspoint;\n\npublic class HelloWorld {\n   private String message;\n\n   public void setMessage(String message){\n      this.message  = message;\n   }\n   public void getMessage(){\n      System.out.println(\"Your Message : \" + message);\n   }\n}\n</pre> \n        <p>Following is the content of the second file <b>MainApp.java</b> −</p> \n        <pre class=\"prettyprint notranslate\">\npackage com.tutorialspoint;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class MainApp {\n   public static void main(String[] args) {\n      ApplicationContext context = new ClassPathXmlApplicationContext(\"Beans.xml\");\n      HelloWorld obj = (HelloWorld) context.getBean(\"helloWorld\");\n      obj.getMessage();\n   }\n}\n</pre> \n        <p>Following two important points are to be noted about the main program −</p> \n        <ul class=\"list\"> \n         <li><p>The first step is to create an application context where we used framework API <b>ClassPathXmlApplicationContext()</b>. This API loads beans configuration file and eventually based on the provided API, it takes care of creating and initializing all the objects, i.e. beans mentioned in the configuration file.</p></li> \n         <li><p>The second step is used to get the required bean using <b>getBean()</b> method of the created context. This method uses bean ID to return a generic object, which finally can be casted to the actual object. Once you have an object, you can use this object to call any class method.</p></li> \n        </ul> \n        <h2>Step 4 - Create Bean Configuration File</h2> \n        <p>You need to create a Bean Configuration file which is an XML file and acts as a cement that glues the beans, i.e. the classes together. This file needs to be created under the <b>src</b> directory as shown in the following screenshot −</p> \n        <img src=\"/spring/images/beans_conf_file.jpg\" alt=\"Beans Configuration File\"> \n        <p>Usually developers name this file as <b>Beans.xml</b>, but you are independent to choose any name you like. You have to make sure that this file is available in CLASSPATH and use the same name in the main application while creating an application context as shown in MainApp.java file.</p> \n        <p>The Beans.xml is used to assign unique IDs to different beans and to control the creation of objects with different values without impacting any of the Spring source files. For example, using the following file you can pass any value for \"message\" variable and you can print different values of message without impacting HelloWorld.java and MainApp.java files. Let us see how it works −</p> \n        <pre class=\"prettyprint notranslate\">\n&lt;?xml version = \"1.0\" encoding = \"UTF-8\"?&gt;\n\n&lt;beans xmlns = \"http://www.springframework.org/schema/beans\"\n   xmlns:xsi = \"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation = \"http://www.springframework.org/schema/beans\n   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\"&gt;\n\n   &lt;bean id = \"helloWorld\" class = \"com.tutorialspoint.HelloWorld\"&gt;\n      &lt;property name = \"message\" value = \"Hello World!\"/&gt;\n   &lt;/bean&gt;\n\n&lt;/beans&gt;\n</pre> \n        <p>When Spring application gets loaded into the memory, Framework makes use of the above configuration file to create all the beans defined and assigns them a unique ID as defined in <b>&lt;bean&gt;</b> tag. You can use <b>&lt;property&gt;</b> tag to pass the values of different variables used at the time of object creation.</p> \n        <h2>Step 5 - Running the Program</h2> \n        <p>Once you are done with creating the source and beans configuration files, you are ready for this step, which is compiling and running your program. To do this, keep MainApp.Java file tab active and use either <b>Run</b> option available in the Eclipse IDE or use <b>Ctrl + F11</b> to compile and run your <b>MainApp</b> application. If everything is fine with your application, this will print the following message in Eclipse IDE's console −</p> \n        <pre class=\"result notranslate\">\nYour Message : Hello World!\n</pre> \n        <p>Congratulations, you have successfully created your first Spring Application. You can see the flexibility of the above Spring application by changing the value of \"message\" property and keeping both the source files unchanged.</p> \n        <hr> \n        <div class=\"pre-btn\"> \n         <a href=\"/spring/spring_environment_setup.htm\"><i class=\"icon icon-arrow-circle-o-left big-font\"></i> Previous Page</a> \n        </div> \n        <div class=\"print-btn center\"> \n         <a href=\"/cgi-bin/printpage.cgi\" target=\"_blank\"><i class=\"icon icon-print big-font\"></i> Print</a> \n        </div> \n        <div class=\"nxt-btn\"> \n         <a href=\"/spring/spring_ioc_containers.htm\">Next Page <i class=\"icon icon-arrow-circle-o-right big-font\"></i>&nbsp;</a> \n        </div> \n        <hr> \n        <!-- PRINTING ENDS HERE --> \n        <div class=\"bottomgooglead\"> \n         <div class=\"bottomadtag\">\n          Advertisements\n         </div> \n         <script><!--\nvar width = 580;\nvar height = 400;\nvar format = \"580x400_as\";\nif( window.innerWidth < 468 ){\n   width = 300;\n   height = 250;\n   format = \"300x250_as\";\n}\ngoogle_ad_client = \"pub-7133395778201029\";\ngoogle_ad_width = width;\ngoogle_ad_height = height;\ngoogle_ad_format = format;\ngoogle_ad_type = \"image\";\ngoogle_ad_channel =\"\";\n//--></script> \n         <script src=\"https://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script> \n        </div> \n       </div> \n      </div> \n      <div class=\"row\"> \n       <div class=\"col-md-3\" id=\"rightbar\"> \n        <div class=\"simple-ad\"> \n         <a href=\"javascript:void(0)\" onclick=\"var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.facebook.com/sharer.php?u=' + 'https://www.tutorialspoint.com/spring/spring_hello_world_example.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;\"> <img src=\"/images/facebookIcon.jpg\" alt=\"img\"> </a> \n         <a href=\"javascript:void(0)\" onclick=\"var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://twitter.com/share?url=' + 'https://www.tutorialspoint.com/spring/spring_hello_world_example.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;\"> <img src=\"/images/twitterIcon.jpg\" alt=\"img\"> </a> \n         <a href=\"javascript:void(0)\" onclick=\"var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.linkedin.com/cws/share?url=' + 'https://www.tutorialspoint.com/spring/spring_hello_world_example.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;\"> <img src=\"/images/linkedinIcon.jpg\" alt=\"img\"> </a> \n         <a href=\"javascript:void(0)\" onclick=\"var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://plus.google.com/share?url=https://www.tutorialspoint.com/spring/spring_hello_world_example.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;\"> <img src=\"/images/googlePlusIcon.jpg\" alt=\"img\"> </a> \n         <a href=\"javascript:void(0)\" onclick=\"var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.stumbleupon.com/submit?url=https://www.tutorialspoint.com/spring/spring_hello_world_example.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;\"> <img src=\"/images/StumbleUponIcon.jpg\" alt=\"img\"> </a> \n         <a href=\"javascript:void(0)\" onclick=\"var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://reddit.com/submit?url=https://www.tutorialspoint.com/spring/spring_hello_world_example.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=656,top='+sTop+',left='+sLeft);return false;\"> <img src=\"/images/reddit.jpg\" alt=\"img\"> </a> \n        </div> \n        <div class=\"rightgooglead\"> \n         <script><!--\ngoogle_ad_client = \"pub-7133395778201029\";\ngoogle_ad_width = 300;\ngoogle_ad_height = 250;\ngoogle_ad_format = \"300x250_as\";\ngoogle_ad_type = \"image\";\ngoogle_ad_channel =\"\";\n//--></script> \n         <script src=\"https://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script> \n        </div> \n        <div class=\"rightgooglead\"> \n         <script><!--\ngoogle_ad_client = \"pub-7133395778201029\";\ngoogle_ad_width = 300;\ngoogle_ad_height = 600;\ngoogle_ad_format = \"300x600_as\";\ngoogle_ad_type = \"image\";\ngoogle_ad_channel =\"\";\n//--></script> \n         <script src=\"https://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script> \n        </div> \n        <div class=\"rightgooglead\"> \n         <script><!--\ngoogle_ad_client = \"ca-pub-2537027957187252\";\n/* Right Side Ad */\ngoogle_ad_slot = \"right_side_ad\";\ngoogle_ad_width = 300;\ngoogle_ad_height = 250;\n//-->\n</script> \n         <script src=\"https://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script> \n        </div> \n       </div> \n      </div> \n     </div> \n    </div> \n   </div> \n   <div class=\"footer-copyright\"> \n    <div class=\"container\"> \n     <div class=\"row\"> \n      <div class=\"col-md-1\"> \n       <a href=\"index.htm\" class=\"logo\"> <img alt=\"Tutorials Point\" class=\"img-responsive\" src=\"/scripts/img/logo-footer.png\"> </a> \n      </div> \n      <div class=\"col-md-4 col-sm-12 col-xs-12\"> \n       <nav id=\"sub-menu\"> \n        <ul> \n         <li><a href=\"/about/about_privacy.htm\">Privacy Policy</a></li> \n         <li><a href=\"/about/about_cookies.htm\">Cookies Policy</a></li> \n         <li><a href=\"/about/contact_us.htm\">Contact</a></li> \n        </ul> \n       </nav> \n      </div> \n      <div class=\"col-md-3 col-sm-12 col-xs-12\"> \n       <p>© Copyright 2019. All Rights Reserved.</p> \n      </div> \n      <div class=\"col-md-4 col-sm-12 col-xs-12\"> \n       <div class=\"news-group\"> \n        <input type=\"text\" class=\"form-control-foot search\" name=\"textemail\" id=\"textemail\" autocomplete=\"off\" placeholder=\"Enter email for newsletter\" onfocus=\"if (this.value == 'Enter email for newsletter...') {this.value = '';}\" onblur=\"if (this.value == '') {this.value = 'Enter email for newsletter...';}\"> \n        <span class=\"input-group-btn\"> <button class=\"btn btn-default btn-footer\" id=\"btnemail\" type=\"submit\" onclick=\"javascript:void(0);\">go</button> </span> \n        <div id=\"newsresponse\"></div> \n       </div> \n      </div> \n     </div> \n    </div> \n   </div> \n  </div> \n  <div id=\"privacy-banner\"> \n   <div> \n    <p> We use cookies to provide and improve our services. By using our site, you consent to our Cookies Policy. <a id=\"banner-accept\" href=\"javascript:void(0)\">Accept</a> <a id=\"banner-learn\" href=\"/about/about_cookies.htm\" target=\"_blank\">Learn more</a> </p> \n   </div> \n  </div> \n  <script>\n// Banner Trigger if Not Closed\nif (!localStorage.bannerClosed) {\n  document.getElementById('privacy-banner').style.display = \"inherit\";\n} else {\n  document.getElementById('privacy-banner').style.display = \"none\";\n}\ndocument.getElementById('banner-accept').addEventListener('click', function() {\n  document.getElementById('privacy-banner').style.display = \"none\";\n  localStorage.bannerClosed = 'true';\n});\nif (navigator.userAgent.match(/Opera|OPR\\//)) {\n  document.getElementById('privacy-banner').style.display = \"inherit\";\n}\n</script> \n  <!-- Libs --> \n  <script src=\"/theme/js/custom-min.js?v=7\"></script> \n  <script src=\"https://www.google-analytics.com/urchin.js\">\n</script> \n  <script>\n_uacct = \"UA-232293-6\";\nurchinTracker();\n$('.pg-icon').click(function(){\n   $('.wrapLoader').show();\n});\n</script>    \n </body>\n</html>");
        webDocument.setTitle("Spring Hello World Example");
        List<JSONObject> metadata = new ArrayList<>();
        JSONObject metatag = new JSONObject();
        metatag.put("name","description");
        metatag.put("content","Spring Hello World Example - Learn Java Spring Framework version 4.1.6 in simple and easy steps starting from basic to advanced concepts with examples including Overview, Architecture, environment setup, Hello World Example, inversion of control (IoC), dependency injection, bean definition, scopes, bean life cycle, Post Processors, definition inheritance, dependency injection,  inner beans, injecting collection, autowiring, Annotation, Java based configuration, event handling, custom events, different modules, aspect oriented programming (AOP), database access (JDBC), Transaction Management, Web MVC framework, logging with Log4j, Web Flow, Exception handling, EJB integration and Sending email, Spring Interview Questions, Answers, Quiz and Online Mock Test.");
        metadata.add(metatag);
        metatag.put("name","keywords");
        metatag.put("content","Free, Spring, Tutorials, beginners, Framework, Web Flow,  Reference, Manual, Guide, transaction, Management, Overview, Architecture, environment setup, Hello World Example, inversion of control (IoC), dependency injection, bean definition, scopes, bean life cycle, Post Processors, definition inheritance, dependency injection,  inner beans, injecting collection, autowiring, Annotation, Java based configuration, event handling, custom events, different modules, aspect oriented programming (AOP), database access (JDBC), Web MVC framework, logging with Log4j, Exception handling, EJB integration and Sending email, Spring Interview Questions, Answers, Quiz and Online Mock Test.");
        metadata.add(metatag);
        metatag.put("name","viewport");
        metatag.put("content","width=device-width,initial-scale=1.0,user-scalable=yes");
        metadata.add(metatag);
        metatag.put("property","og:locale");
        metatag.put("content","en_US");
        metadata.add(metatag);
        metatag.put("property","og:type");
        metatag.put("content","website");
        metadata.add(metatag);
        metatag.put("property","fb:app_id");
        metatag.put("content","471319149685276");
        metadata.add(metatag);
        metatag.put("property","og:site_name");
        metatag.put("content","www.tutorialspoint.com");
        metadata.add(metatag);
        metatag.put("name","apple-mobile-web-app-capable");
        metatag.put("content","yes");
        metadata.add(metatag);
        metatag.put("name","apple-mobile-web-app-status-bar-style");
        metatag.put("content","black");
        metadata.add(metatag);
        metatag.put("name","author");
        metatag.put("content","tutorialspoint.com");
        metadata.add(metatag);
//        webDocument.setMetadata(metadata);
        webDocument.setDescription("Spring Hello World Example - Learn Java Spring Framework version 4.1.6 in simple and easy steps starting from basic to advanced concepts with examples including Overview, Architecture, environment setup, Hello World Example, inversion of control (IoC), dependency injection, bean definition, scopes, bean life cycle, Post Processors, definition inheritance, dependency injection,  inner beans, injecting collection, autowiring, Annotation, Java based configuration, event handling, custom events, different modules, aspect oriented programming (AOP), database access (JDBC), Transaction Management, Web MVC framework, logging with Log4j, Web Flow, Exception handling, EJB integration and Sending email, Spring Interview Questions, Answers, Quiz and Online Mock Test.");
        webDocument.setKeywords("Free, Spring, Tutorials, beginners, Framework, Web Flow,  Reference, Manual, Guide, transaction, Management, Overview, Architecture, environment setup, Hello World Example, inversion of control (IoC), dependency injection, bean definition, scopes, bean life cycle, Post Processors, definition inheritance, dependency injection,  inner beans, injecting collection, autowiring, Annotation, Java based configuration, event handling, custom events, different modules, aspect oriented programming (AOP), database access (JDBC), Web MVC framework, logging with Log4j, Exception handling, EJB integration and Sending email, Spring Interview Questions, Answers, Quiz and Online Mock Test.");
        webDocument.setImageCount(16);
        webDocument.setCodePercentage(1.0471205);
    }

    @Test
    public void testGetWebDoc() throws Exception{
        when(webDocumentService.getContentExtractorResults()).thenReturn(webDocument);
        mockMvc.perform(MockMvcRequestBuilders.get("/api/v1/webdoc")
                .contentType(MediaType.APPLICATION_JSON).content(asJsonString(webDocument)))
                .andExpect(MockMvcResultMatchers.status().isOk())
                .andDo(MockMvcResultHandlers.print());
    }

    private static String asJsonString(final Object obj)
    {
        try{
            return new ObjectMapper().writeValueAsString(obj);

        }catch(Exception e){
            throw new RuntimeException(e);
        }
    }
}